client:
    image: elastic
    volumes:
        - ./data:/data
        - ./config:/config
    ports:
        - 9200:9200
    extra_hosts:
        - "client:127.0.0.1"
    command: ./elasticsearch --node.client true --http.enabled true



data1:
    image: elastic
    links:
        - client
    volumes:
        - ./data:/data
        - ./config:/config


data2:
    image: elastic
    links:
        - client
    volumes:
        - ./data:/data
        - ./config:/config


queue:
    image: redis


kb:
    image: kibana:latest
    volumes:
        - ./config:/config
    ports:
        - "5601:5601"
    links:
        - client
    command: /opt/kibana/bin/kibana --config /config/kibana.yml



ls_input:
    image: logstash
    links:
      - queue
    ports:
        - 1234:1234
    volumes:
        - ./config:/config
    command:
        ./logstash --config /config/logstash-input.conf

ls_output:
    image: logstash
    links:
      - queue
      - client
    volumes:
        - ./config:/config
