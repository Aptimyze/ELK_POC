client:
    extends:
      file: common.yml
      service: client

data2:
    extends:
      file: common.yml
      service: data

data1:
    extends:
      file: common.yml
      service: data


queue:
    image: redis

kibana:
    image: kibana:latest
    volumes:
        - ./config:/config
    ports:
        - 5601:5601
    links:
        - client
    command: /opt/kibana/bin/kibana --config /config/kibana.yml


ls_input:
    build: logstash
    links:
      - queue
    ports:
        - 1234:1234
    volumes:
        - ./config:/config
    command:
        ./logstash --config /config/logstash-input.conf

ls_output:
    build: logstash
    links:
      - queue
      - client
    volumes:
        - ./config:/config
